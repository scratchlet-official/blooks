<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Scratchlet - Blooks</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&family=Titan+One&display=swap" rel="stylesheet">
<style>
  body {
    font-family: "Nunito", sans-serif;
    background: 
      linear-gradient(rgba(210, 180, 140, 0.15) 1px, transparent 1px),
      linear-gradient(90deg, rgba(210, 180, 140, 0.15) 1px, transparent 1px),
      linear-gradient(135deg, #FF8C00 0%, #FFA500 100%);
    background-size: 40px 40px;
    margin: 0;
    padding: 20px;
    min-height: 100vh;
    position: relative;
    color: white;
  }

  header {
    position: fixed;
    top: 0; left: 0; right: 0;
    background: #512da8;
    color: white;
    padding: 15px 30px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    z-index: 100;
    border-bottom-left-radius: 12px;
    border-bottom-right-radius: 12px;
    font-family: "Titan One", cursive;
  }

  header a, header nav a { color: white; text-decoration: none; font-weight: 600; font-size: 18px; margin: 0 6px; }
  header nav a { background: rgba(255,255,255,0.15); padding: 6px 12px; border-radius: 8px; }

  .page-title {
    font-size: 2.5rem;
    font-weight: 700;
    text-align: center;
    margin: 120px 0 20px;
    color: #4a148c;
    font-family: "Titan One", cursive;
  }

  #unlock-btn {
    display: block;
    padding: 12px 24px;
    font-size: 16px;
    margin: 0 auto 20px auto;
    border: none;
    border-radius: 12px;
    background: #7b1fa2;
    color: white;
    cursor: pointer;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
  }

  #unlock-btn:hover { background: #9c27b0; }

  .scroll-card {
    background: rgba(255,255,255,0.15);
    border-radius: 20px;
    padding: 25px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.18);
    width: 90%;
    max-width: 1400px;
    max-height: 80vh;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    margin: auto;
    gap: 30px;
  }

  .pack-name {
    font-size: 1.8rem;
    font-weight: 700;
    color: #7b1fa2;
    margin-bottom: 6px;
    border-bottom: 2px solid #7b1fa2;
    padding-bottom: 6px;
  }

  .blooks-row {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 8px;
  }

  .blook {
    position: relative;
    width: 100%;
    aspect-ratio: 1/1;
    border-radius: 10px;
    background: transparent;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: default;
    transition: transform 0.2s;
  }

  .blook:hover {
    transform: scale(1.05);
  }

  .blook img.blook-image {
    max-width: 70%;
    max-height: 70%;
    object-fit: contain;
  }

  .blook.locked img.blook-image {
    filter: grayscale(100%);
    opacity: 0.6;
  }

  .blook.locked img.locked-overlay {
    position: absolute;
    width: 40px; height: 40px;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    z-index: 20;
    pointer-events: none;
  }

  .blook-count {
    position: absolute;
    bottom: 4px; left: 4px;
    width: 22px; height: 22px;
    border-radius: 50%;
    color: white; font-size: 12px;
    display: flex; align-items: center; justify-content: center;
    font-weight: bold; z-index: 20;
    box-shadow: 0 2px 6px rgba(0,0,0,0.25);
  }

  footer {
    text-align: center;
    padding: 20px;
    font-size: 14px;
    margin-top: 20px;
    border-radius: 12px;
    color: #fff;
  }

  .scroll-card::-webkit-scrollbar { width: 8px; }
  .scroll-card::-webkit-scrollbar-thumb { background: #7b1fa2; border-radius: 4px; }

  #blook-modal {
    position: fixed;
    inset: 0;
    z-index: 200;
    display: none;
    justify-content: center;
    align-items: center;
  }
  .modal-overlay {
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0.6);
    backdrop-filter: blur(3px);
  }
  .modal-card {
    position: relative;
    width: 360px;
    aspect-ratio: 1/1;
    display: flex;
    flex-direction: column;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 18px 60px rgba(0,0,0,0.35);
    background: #f3e5f5;
  }
  .blook-image-section {
    flex: 1;
    position: relative;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
  }
  .blook-image-section img {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    max-width: 50%;
    max-height: 50%;
    border-radius: 12px;
  }
  .blook-info-section {
    padding: 16px;
    text-align: center;
  }
  .blook-info-section h2 { margin: 0; font-size: 1.8rem; color: #7b1fa2; }
  .blook-info-section p { margin: 4px 0; font-size: 1rem; color: #333; }
</style>
</head>
<body>

<header>
  <a href="https://scratchlet-official.github.io/market/">← Back to Market</a>
  <nav>
    <a href="https://scratchlet-official.github.io/market/">Home</a>
    <a href="https://scratchlet-official.github.io/market/">Market</a>
    <a href="#">Profile</a>
    <a href="#">Blooks</a>
  </nav>
  <span>Blooks Collection</span>
</header>

<h1 class="page-title">Blooks</h1>
<button id="unlock-btn">Unlock All Blooks</button>

<div class="scroll-card" id="collection"></div>

<footer>
  Scratchlet © 2024 • The Ultimate Blooket Remix Experience
</footer>

<!-- Modal -->
<div id="blook-modal">
  <div class="modal-overlay"></div>
  <div class="modal-card">
    <div class="blook-image-section" id="modal-blook-image-section">
      <img id="modal-blook-image" src="" alt="">
    </div>
    <div class="blook-info-section">
      <h2 id="modal-blook-name"></h2>
      <p><strong>Rarity:</strong> <span id="modal-blook-rarity"></span></p>
      <p><strong>Chance:</strong> <span id="modal-blook-chance"></span></p>
      <p><strong>Owned:</strong> <span id="modal-blook-count"></span></p>
    </div>
  </div>
</div>

<script>
const rarityColors = { Uncommon:"#32CD32", Rare:"#1E90FF", Epic:"#FF4500", Legendary:"#FFA500", Chroma:"#00FFFF", Unique:"#008080" };

// Load saved data
let { unlockedBlooks: unlocked, blookCounts } = (() => {
  const unlockedBlooks = JSON.parse(localStorage.getItem('marketUnlockedBlooks')) || [];
  const blookCounts = JSON.parse(localStorage.getItem('marketBlookCounts')) || {};
  return { unlockedBlooks, blookCounts };
})();

const packs = [
  {
    pack:"Breakfast Pack",
    background:"https://i.postimg.cc/jdK9YNSp/download.webp",
    blooks:[
      {name:"Toast",rarity:"Uncommon",chance:"12.5%",image:"https://i.postimg.cc/NGJcDp4N/toast.webp"},
      {name:"Cereal",rarity:"Uncommon",chance:"12.5%",image:"https://i.postimg.cc/HsFCDnFX/cereal.webp"},
      {name:"Yogurt",rarity:"Uncommon",chance:"12.5%",image:"https://i.postimg.cc/7hWrLZhv/yogurt.webp"},
      {name:"Breakfast Combo",rarity:"Uncommon",chance:"12.5%",image:"https://i.postimg.cc/zfrZvMzf/breakfastcombo.webp"},
      {name:"Orange Juice",rarity:"Uncommon",chance:"12.5%",image:"https://i.postimg.cc/vH4dNf2G/orangejuice.webp"},
      {name:"Milk",rarity:"Uncommon",chance:"12.5%",image:"https://i.postimg.cc/0ym18xq3/milk.webp"},
      {name:"Waffle",rarity:"Rare",chance:"9%",image:"https://i.postimg.cc/MGmkQDHm/waffle.webp"},
      {name:"Pancakes",rarity:"Rare",chance:"9%",image:"https://i.postimg.cc/cC6PPGmF/pancakes.webp"},
      {name:"French Toast",rarity:"Epic",chance:"5%",image:"https://i.postimg.cc/QCPv3YYh/frenchtoast.webp"}
    ]
  },
  {
    pack:"Wonderland Pack",
    background:"https://i.postimg.cc/qRdbg5WQ/wonderland-background.webp",
    blooks:[
      {name:"Two of Spades",rarity:"Uncommon",chance:"15.2%",image:"https://i.postimg.cc/X7nRspHx/twoofspades.webp"},
      {name:"Eat Me",rarity:"Uncommon",chance:"15%",image:"https://i.postimg.cc/bvGc1WCh/eat.webp"},
      {name:"Drink Me",rarity:"Uncommon",chance:"15%",image:"https://i.postimg.cc/6pbx2thc/drink.webp"},
      {name:"Alice",rarity:"Uncommon",chance:"15%",image:"https://i.postimg.cc/RVRBmc6j/alice.webp"},
      {name:"Queen of Hearts",rarity:"Uncommon",chance:"15%",image:"https://i.postimg.cc/SRfwyhsW-/queenofhearts.webp"},
      {name:"Dormouse",rarity:"Rare",chance:"6.5%",image:"https://i.postimg.cc/fTZN1HLc/dormouse.webp"},
      {name:"White Rabbit",rarity:"Rare",chance:"6.5%",image:"https://i.postimg.cc/jq6V6zXL/whiterabbit.webp"},
      {name:"Cheshire Cat",rarity:"Rare",chance:"6.5%",image:"https://i.postimg.cc/1X0ZfFWV/cheshirecat.webp"},
      {name:"Caterpillar",rarity:"Epic",chance:"2.5%",image:"https://i.postimg.cc/9Xy283WX/caterpillar.webp"}
    ]
  }
];

const collection = document.getElementById('collection');

function renderCollection(){
  collection.innerHTML = '';
  packs.forEach(pack => {
    const packDiv = document.createElement('div');
    const packName = document.createElement('div');
    packName.className = 'pack-name';
    packName.textContent = pack.pack;
    packDiv.appendChild(packName);

    const brow = document.createElement('div');
    brow.className = 'blooks-row';

    pack.blooks.forEach(blook => {
      const blookDiv = document.createElement('div');
      blookDiv.className = 'blook' + (unlocked.includes(blook.name)?'':' locked');

      const countHTML = unlocked.includes(blook.name)?
        `<div class="blook-count" style="background:${rarityColors[blook.rarity]}">${blookCounts[blook.name]||1}</div>`:''

      blookDiv.innerHTML = `<img src="${blook.image}" class="blook-image">
                            ${!unlocked.includes(blook.name)?`<img src="https://i.postimg.cc/TYvNxYK3/LOCKED-1.png" class="locked-overlay">` : '' }
                            ${countHTML}`;

      blookDiv.addEventListener('click', () => {
        if(!unlocked.includes(blook.name)) return;
        document.getElementById('modal-blook-image').src = blook.image;
        document.getElementById('modal-blook-image-section').style.backgroundImage = `url('${pack.background}')`;
        document.getElementById('modal-blook-name').textContent = blook.name;
        document.getElementById('modal-blook-rarity').textContent = blook.rarity;
        document.getElementById('modal-blook-chance').textContent = blook.chance;
        document.getElementById('modal-blook-count').textContent = blookCounts[blook.name] || 1;
        document.getElementById('blook-modal').style.display='flex';
      });

      brow.appendChild(blookDiv);
    });

    packDiv.appendChild(brow);
    collection.appendChild(packDiv);
  });
}

// Unlock button now increments duplicates
document.getElementById('unlock-btn').addEventListener('click', () => {
  packs.forEach(pack => pack.blooks.forEach(blook => {
    if(!unlocked.includes(blook.name)){
      unlocked.push(blook.name);
      blookCounts[blook.name] = 1;
    } else {
      blookCounts[blook.name] = (blookCounts[blook.name] || 1) + 1;
    }
  }));
  localStorage.setItem('marketUnlockedBlooks', JSON.stringify(unlocked));
  localStorage.setItem('marketBlookCounts', JSON.stringify(blookCounts));
  renderCollection();
});

document.querySelector('.modal-overlay').addEventListener('click', ()=>{document.getElementById('blook-modal').style.display='none'});
window.addEventListener('keydown', e=>{if(e.key==='Escape') document.getElementById('blook-modal').style.display='none'});

renderCollection();
</script>
</body>
</html>
